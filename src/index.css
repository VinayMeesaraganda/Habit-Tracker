@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== VIBRANT & PLAYFUL DESIGN SYSTEM ===== */

:root {
  /* Backgrounds */
  --bg-app: #FFF9E6;
  --bg-elevated: #FFFBF0;
  --bg-card: #FFFFFF;
  --bg-card-hover: #FFFBF5;

  /* Text */
  --text-primary: #1A1A1A;
  --text-secondary: #666666;
  --text-tertiary: #999999;
  --text-on-color: #FFFFFF;

  /* Accents */
  --accent-primary: #FF6B7A;
  --accent-fire: #FF6B35;
  --accent-success: #4CAF50;
  --accent-warning: #FFB800;
  --accent-error: #FF4757;

  /* Borders */
  --border-subtle: #F0F0F0;
  --border-medium: #E0E0E0;
  --border-strong: #CCCCCC;

  /* Spacing */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  --space-2xl: 48px;
  --space-3xl: 64px;

  /* Border Radius */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
  --shadow-card: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 6px 16px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
  --shadow-fab: 0 6px 20px rgba(255, 107, 122, 0.3);
  --shadow-nav: 0 -4px 12px rgba(0, 0, 0, 0.1);

  /* Transitions */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

@layer base {
  * {
    @apply border-DEFAULT;
    -webkit-tap-highlight-color: transparent;
    /* Remove blue flash on tap */
  }

  /* Disable text selection on UI elements for native app feel */
  button,
  a,
  .select-none {
    user-select: none;
    -webkit-user-select: none;
  }

  body {
    @apply font-sans antialiased;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    background: var(--bg-app);
    color: var(--text-primary);
  }

  /* Custom selection color */
  ::selection {
    background: rgba(255, 107, 122, 0.2);
    color: var(--text-primary);
  }

  /* iOS Safe Area Support */
  .safe-area-top {
    padding-top: env(safe-area-inset-top, 0px);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .safe-area-all {
    padding-top: env(safe-area-inset-top, 0px);
    padding-bottom: env(safe-area-inset-bottom, 0px);
    padding-left: env(safe-area-inset-left, 0px);
    padding-right: env(safe-area-inset-right, 0px);
  }
}

@layer components {

  /* ===== CARDS ===== */
  .card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-lg);
    transition: all var(--transition-base);
  }

  .card:hover {
    background: var(--bg-card-hover);
    border-color: var(--border-medium);
  }

  .card-elevated {
    background: var(--bg-elevated);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-lg);
  }

  /* ===== BUTTONS ===== */
  .btn {
    @apply px-6 py-3 rounded-xl font-medium transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-white/20 focus:ring-offset-2 focus:ring-offset-black;
  }

  .btn-primary {
    background: var(--accent-primary);
    color: var(--bg-app);
  }

  .btn-primary:hover {
    background: var(--text-secondary);
  }

  .btn-secondary {
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-medium);
  }

  .btn-secondary:hover {
    background: var(--bg-card-hover);
    border-color: var(--border-strong);
  }

  .btn-ghost {
    background: transparent;
    color: var(--text-secondary);
  }

  .btn-ghost:hover {
    background: var(--bg-card);
    color: var(--text-primary);
  }

  /* ===== INPUTS ===== */
  .input {
    @apply w-full px-4 py-3 rounded-xl;
    background: var(--bg-card);
    border: 1px solid var(--border-medium);
    color: var(--text-primary);
    transition: all var(--transition-base);
  }

  .input::placeholder {
    color: var(--text-tertiary);
  }

  .input:focus {
    @apply outline-none ring-2 ring-white/20;
    border-color: var(--border-strong);
  }

  /* ===== PROGRESS RING ===== */
  .progress-ring-circle {
    transition: stroke-dashoffset var(--transition-slow);
    transform: rotate(-90deg);
    transform-origin: 50% 50%;
  }

  /* ===== HABIT ROW ===== */
  .habit-row {
    @apply flex items-center gap-4 p-4 rounded-xl;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    transition: all var(--transition-base);
  }

  .habit-row:hover {
    background: var(--bg-card-hover);
    border-color: var(--border-medium);
  }

  .habit-row:active {
    transform: scale(0.98);
  }

  /* ===== CHECKBOX ===== */
  .checkbox {
    @apply w-8 h-8 rounded-full flex items-center justify-center cursor-pointer;
    border: 2px solid var(--border-medium);
    background: transparent;
    transition: all var(--transition-fast);
  }

  .checkbox:hover {
    border-color: var(--border-strong);
    background: var(--bg-elevated);
  }

  .checkbox.checked {
    background: var(--accent-success);
    border-color: var(--accent-success);
  }

  .checkbox.checked:hover {
    background: #00C090;
    border-color: #00C090;
  }

  /* Mobile touch targets */
  @media (max-width: 768px) {
    .checkbox {
      @apply w-10 h-10;
    }
  }

  /* ===== STREAK BADGE ===== */
  .streak-badge {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-xl;
    background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 107, 53, 0.05) 100%);
    border: 1px solid rgba(255, 107, 53, 0.2);
  }

  /* ===== SECTION DIVIDER ===== */
  .section-divider {
    @apply flex items-center gap-3 my-6;
  }

  .section-divider::before,
  .section-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-subtle);
  }

  .section-divider-text {
    @apply text-xs font-semibold uppercase tracking-wider;
    color: var(--text-tertiary);
  }

  /* ===== SCROLLBAR (DARK) ===== */
  .scrollbar-dark::-webkit-scrollbar {
    @apply h-2 w-2;
  }

  .scrollbar-dark::-webkit-scrollbar-track {
    background: var(--bg-elevated);
    @apply rounded;
  }

  .scrollbar-dark::-webkit-scrollbar-thumb {
    background: var(--border-medium);
    @apply rounded;
  }

  .scrollbar-dark::-webkit-scrollbar-thumb:hover {
    background: var(--border-strong);
  }

  /* ===== BOTTOM NAV ===== */
  .bottom-nav {
    @apply fixed bottom-0 left-0 right-0 z-50;
    background: var(--bg-app);
    border-top: 1px solid var(--border-subtle);
    padding-bottom: env(safe-area-inset-bottom);
  }

  .bottom-nav-item {
    @apply flex flex-col items-center gap-1 py-2 px-4 rounded-xl transition-all;
    color: var(--text-tertiary);
  }

  .bottom-nav-item:hover {
    color: var(--text-secondary);
  }

  .bottom-nav-item.active {
    color: var(--text-primary);
  }

  /* ===== SIDEBAR (DESKTOP) ===== */
  .sidebar {
    @apply fixed left-0 top-0 bottom-0 w-60 z-40;
    background: var(--bg-app);
    border-right: 1px solid var(--border-subtle);
  }

  .sidebar-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all;
    color: var(--text-secondary);
  }

  .sidebar-item:hover {
    background: var(--bg-card);
    color: var(--text-primary);
  }

  .sidebar-item.active {
    background: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-medium);
  }

  /* ===== PRINT ===== */
  @media print {
    .no-print {
      display: none !important;
    }

    body {
      background: white;
      color: black;
    }

    * {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }
  }
}

@layer utilities {

  /* ===== TYPOGRAPHY ===== */
  .text-metric-xl {
    @apply text-6xl font-semibold;
    line-height: 1;
  }

  .text-metric-lg {
    @apply text-5xl font-semibold;
    line-height: 1;
  }

  .text-metric-md {
    @apply text-4xl font-semibold;
    line-height: 1;
  }

  .text-metric-sm {
    @apply text-2xl font-semibold;
    line-height: 1;
  }

  .text-label {
    @apply text-xs font-medium uppercase tracking-wider;
    color: var(--text-tertiary);
  }

  /* ===== ANIMATIONS ===== */
  .animate-fade-in {
    animation: fadeIn 0.4s ease-out;
  }

  .animate-slide-up {
    animation: slideUp 0.5s ease-out;
  }

  .animate-scale-in {
    animation: scaleIn 0.3s ease-out;
  }

  .animate-pulse-subtle {
    animation: pulseSubtle 2s ease-in-out infinite;
  }

  .animate-check {
    animation: checkMark 0.3s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes pulseSubtle {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.7;
    }
  }

  @keyframes checkMark {
    0% {
      stroke-dashoffset: 24;
      opacity: 0;
    }

    100% {
      stroke-dashoffset: 0;
      opacity: 1;
    }
  }

  /* ===== GLOW EFFECTS ===== */
  .glow-success {
    box-shadow: 0 0 20px rgba(0, 217, 163, 0.3);
  }

  .glow-fire {
    box-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
  }

  /* ===== BACKGROUND EFFECTS ===== */
  .bg-gradient-radial {
    background: radial-gradient(circle at center, var(--tw-gradient-stops));
  }

  .bg-noise {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  }
}